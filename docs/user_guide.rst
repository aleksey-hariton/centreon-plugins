==========
User Guide
==========

-----------
Description
-----------

"centreon-plugins" is a free and open source project to monitor systems.
The project can be used with Centreon, Icinga and all monitoring softwares compatible nagios plugins.

The lastest version is available on following git repository: http://git.centreon.com/centreon-plugins.git

------------
Installation
------------

Debian Wheezy
^^^^^^^^^^^^^

Get the last version of "centreon-plugins" from the repository:
::

  # aptitude install git
  # git clone http://git.centreon.com/centreon-plugins.git

To monitor SNMP systems, you need to install the following packages:
::

  # aptitude install perl libsnmp-perl

You can install other packages to use more plugins:
::

  # aptitude install libxml-libxml-perl libjson-perl libwww-perl libxml-xpath-perl libnet-telnet-perl libnet-ntp-perl libnet-dns-perl libdbi-perl libdbd-mysql-perl libdbd-pg-perl

To use 'memcached' functionnality, you need to install the following CPAN module (no debian package): http://search.cpan.org/~wolfsage/Memcached-libmemcached-1.001702/libmemcached.pm
  
Centos/Rhel 6
^^^^^^^^^^^^^

Get the last version of "centreon-plugins" from the repository:
::

  # yum install git
  # git clone http://git.centreon.com/centreon-plugins.git

To monitor SNMP systems, you need to install the following packages:
::

  # yum install perl net-snmp-perl

You can install other packages to use more plugins:
::

  # yum install perl-XML-LibXML perl-JSON perl-libwww-perl perl-XML-XPath perl-Net-Telnet perl-Net-DNS perl-DBI perl-DBD-MySQL perl-DBD-Pg

To use 'memcached' functionnality, you need to install the following CPAN module (package available in 'rpmforge'): http://search.cpan.org/~wolfsage/Memcached-libmemcached-1.001702/libmemcached.pm

-----------
Basic Usage
-----------

We'll use a basic example to show you how to monitor a system. I have finished the install section and i want to monitor a Linux in SNMP.
First, i need to find the plugin to use in the list:
::

  $ perl centreon_plugins.pl --list-plugin | grep -i linux | grep 'PLUGIN'
  PLUGIN: os::linux::local::plugin
  PLUGIN: os::linux::snmp::plugin

It seems that 'os::linux::snmp::plugin' is the good one. So i verify with the option ``--help`` to be sure:
::

  $ perl centreon_plugins.pl --plugin=os::linux::snmp::plugin --help
  ...
  Plugin Description:
    Check Linux operating systems in SNMP.

It's exactly what i need. Now i'll the option ``--list-mode`` to know what can i do with it:
::

  $ perl centreon_plugins.pl --plugin=os::linux::snmp::plugin --list-mode
  ...
  Modes Available:
   processcount
   time
   list-storages
   disk-usage
   diskio
   uptime
   swap
   cpu-detailed
   load
   traffic
   cpu
   inodes
   list-diskspath
   list-interfaces
   packet-errors
   memory
   tcpcon
   storage

I would like to test the 'load' mode:
::

  $ perl centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=load
  UNKNOWN: Missing parameter --hostname.

It's not working because some options are missing. I can have a description of the mode and options with the option ``--help``:
::

  $ perl centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=load --help

Eventually, i have to configure some SNMP options:
::

  $ perl centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=load --hostname=127.0.0.1 --snmp-version=2c --snmp-community=public
  OK: Load average: 0.00, 0.00, 0.00 | 'load1'=0.00;;;0; 'load5'=0.00;;;0; 'load15'=0.00;;;0;

I can set threshold with options ``--warning`` and ``--critical``:
::

  $ perl centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=load --hostname=127.0.0.1 --snmp-version=2c --snmp-community=public --warning=1,2,3 --critical=2,3,4
  OK: Load average: 0.00, 0.00, 0.00 | 'load1'=0.00;0:1;0:2;0; 'load5'=0.00;0:2;0:3;0; 'load15'=0.00;0:3;0:4;0;
  
===
FAQ
===

--------------------
What can i monitor ?
--------------------

The option ``--list-plugin`` can be used to get the list of plugins and a short description.

Headers of the table mean:

* Transport: The check has internal options for the transport
* Protocol: what is used to get the monitoring datas
* Experimental: The check is still in development

+-------------+--------------------+----------------------------+--------------------------------------------+--------------+-------------------------------------------------------------+
|             |                    |               Transport    |                  Protocol                  |              |                                                             |
|  Category   |       Check        +-------+----------+---------+--------+--------+-------+-------+----------+ Experimental |                      Comment                                |
|             |                    |  ssh  |  telnet  |  wsman  |  snmp  |  http  |  wmi  |  jmx  |  custom  |              |                                                             |
+=============+====================+=======+==========+=========+========+========+=======+=======+==========+==============+=============================================================+
|             | Active Directory   |       |          |         |        |        |       |       |    *     |              | Use 'dcdiag' command. Must be installed on Windows.         |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Apache             |       |          |         |        |   *    |       |       |          |              | Need Apache 'mod_status' module.                            |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Apc                |       |          |         |        |   *    |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Apcupsd            |   *   |          |         |        |        |       |       |    *     |              | Use 'apcupsd' commands.                                     |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Bluemind           |       |          |         |        |   *    |       |       |          |              | Use 'influxdb' API.                                         |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Exchange           |       |          |         |        |        |       |       |    *     |              | Use powershell script. Must be installed on Windows.        |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Hddtemp            |       |          |         |        |        |       |       |    *     |              | Open a TCP custom communication                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             |                    |       |          |         |        |        |   *   |       |          |              | Must be installed on Windows.                               |
|             | IIS                +-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
| Application |                    |       |          |    *    |        |        |   *   |       |          |      *       |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Lmsensors          |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Msmq               |       |          |         |        |        |       |       |    *     |      *       | Must be installed on Windows. Not developed yet.            |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Nginx              |       |          |         |        |   *    |       |       |          |              | Need 'HttpStubStatusModule' module.                         |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Pacemaker          |   *   |          |         |        |        |       |       |    *     |              | Use 'crm_mon' command.                                      |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Pfsense            |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Selenium           |       |          |         |        |        |       |       |    *     |              | Connect to a selenium server to play a scenario.            |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Tomcat             |       |          |         |        |   *    |       |       |          |              | Need tomcat webmanager.                                     |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Varnish            |   *   |          |         |        |        |       |       |    *     |              | Use varnish commands.                                       |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | VMWare             |       |          |         |        |        |       |       |    *     |              | Need 'centreon_esxd' connector from Merethis.               |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Pfsense            |       |          |         |   *    |        |       |       |          |              |                                                             |
+-------------+--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Informix           |       |          |         |        |        |       |       |    *     |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | MS SQL             |       |          |         |        |        |       |       |    *     |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
| Database    | MySQL              |       |          |         |        |        |       |       |    *     |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Oracle             |       |          |         |        |        |       |       |    *     |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Postgres           |       |          |         |        |        |       |       |    *     |              |                                                             |
+-------------+--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | ATS Apc            |       |          |         |   *    |        |       |       |          |      *       |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | PDU Apc            |       |          |         |   *    |        |       |       |          |      *       |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | PDU Eaton          |       |          |         |   *    |        |       |       |          |      *       |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Standard Printers  |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Sensorip           |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Sensormetrix Em01  |       |          |         |        |   *    |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Cisco UCS          |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
| Hardware    | Dell Openmanage    |       |          |         |   *    |        |       |       |          |              | Need 'openmanage agent' on the operating system.            |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | HP Proliant        |       |          |         |   *    |        |       |       |          |              | Need 'HP Insight agent' on the operating system.            |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | HP Blade Chassis   |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | IBM HMC            |   *   |          |         |        |        |       |       |    *     |      *       |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | IBM IMM            |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Sun hardware       |   *   |    *     |         |   *    |        |       |       |    *     |              | Can monitor many sun hardware.                              |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | UPS Mge            |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | UPS Standard       |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | UPS Powerware      |       |          |         |   *    |        |       |       |          |              |                                                             |
+-------------+--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+            
|             | Alcatel Omniswitch |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Arkoon             |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Aruba              |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Bluecoat           |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Brocade            |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Checkpoint         |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Cisco              |       |          |         |   *    |        |       |       |          |              | Many cisco (2800, Nexus,...)                                |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Citrix Netscaler   |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Dell Powerconnect  |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
| Network     | F5 Big-Ip          |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Fortinet Fortigate |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Fritzbox           |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | HP Procurve        |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Juniper            |       |          |         |   *    |        |       |       |          |              | Can monitor 'SSG', 'SA', 'SRX' and 'MAG'.                   |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Palo Alto          |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Radware Alteon     |       |          |         |   *    |        |       |       |          |      *       |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Ruggedcom          |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Securactive        |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Stonesoft          |       |          |         |   *    |        |       |       |          |              |                                                             |
+-------------+--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             |                    |   *   |          |         |        |        |       |       |    *     |              | Use AIX commands.                                           |
|             | AIX                +-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             |                    |       |          |         |        |        |   *   |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Freebsd            |       |          |         |   *    |        |       |       |          |              | Need 'bsnmpd' agent.                                        |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             |                    |   *   |          |         |        |        |       |       |    *     |              | Use Linux commands.                                         |
|             | Linux              +-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|  Operating  |                    |       |          |         |   *    |        |       |       |          |              |                                                             |
|   System    +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Solaris            |   *   |          |         |        |        |       |       |    *     |              | Use solaris commands.                                       |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             |                    |       |          |         |   *    |        |       |       |          |              |                                                             |
|             | Windows            +-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             |                    |       |          |    *    |        |        |   *   |       |          |      *       |                                                             |
+-------------+--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Dell MD3000        |       |          |         |        |        |       |       |    *     |              | Need 'SMcli' command.                                       |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Dell TL2000        |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | EMC Clariion       |       |          |         |        |        |       |       |    *     |              | Need 'navisphere' command.                                  |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | EMC DataDomain     |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | EMC Recoverypoint  |   *   |          |         |        |        |       |       |    *     |              | Use appliance commands.                                     |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | HP Lefthand        |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | HP MSA2000         |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | HP p2000           |       |          |         |        |        |   *   |       |          |              | Use the XML API.                                            |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | IBM DS3000         |       |          |         |        |        |       |       |    *     |              | Use 'SMcli' command.                                        |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | IBM DS4000         |       |          |         |        |        |       |       |    *     |              | Use 'SMcli' command.                                        |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | IBM DS5000         |       |          |         |        |        |       |       |    *     |              | Use 'SMcli' command.                                        |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | IBM TS3100         |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | IBM TS3200         |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Netapp             |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Qnap               |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Synology           |       |          |         |   *    |        |       |       |          |              |                                                             |
|             +--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+
|             | Violin 3000        |       |          |         |   *    |        |       |       |          |              |                                                             |
+-------------+--------------------+-------+----------+---------+--------+--------+-------+-------+----------+--------------+-------------------------------------------------------------+

----------------------------
How can i remove perfdatas ?
----------------------------

For example, i check tcp connections from a linux in SNMP with following command:
::

  $ perl centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=tcpcon --hostname=127.0.0.1 --snmp-version=2c --snmp-community=public
  OK: Total connections: 1 | 'total'=1;;;0; 'con_closed'=0;;;0; 'con_closeWait'=0;;;0; '  con_synSent'=0;;;0; 'con_established'=1;;;0; 'con_timeWait'=0;;;0; 'con_lastAck'=0;;;0  ; 'con_listen'=5;;;0; 'con_synReceived'=0;;;0; 'con_finWait1'=0;;;0; 'con_finWait2'=0;  ;;0; 'con_closing'=0;;;0;
  
There are too many perfdatas and i want to keep 'total' perfdata only. I use the option ``--filter-perfdata='total'``:
::

  $ perl centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=tcpcon --hostname=127.0.0.1 --snmp-version=2c --snmp-community=public --filter-perfdata='total'
  OK: Total connections: 1 | 'total'=1;;;0;

I can use regexp in ``--filter-perfdata`` option. So, i can exclude perfdata beginning by 'total':
::

  $ perl centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=tcpcon --hostname=127.0.0.1 --snmp-version=2c --snmp-community=public --filter-perfdata='^(?!(total))'
  OK: Total connections: 1 | 'con_closed'=0;;;0; 'con_closeWait'=0;;;0; 'con_synSent'=0;;;0; 'con_established'=1;;;0; 'con_timeWait'=0;;;0; 'con_lastAck'=0;;;0; 'con_listen'=5;;;0; 'con_synReceived'=0;;;0; 'con_finWait1'=0;;;0; 'con_finWait2'=0;;;0; 'con_closing'=0;;;0;

------------------------------------------------
How can i set threshold: critical if value < X ?
------------------------------------------------

"centreon-plugins" can manage nagios threshold ranges: https://nagios-plugins.org/doc/guidelines.html#THRESHOLDFORMAT

For example, i want to check that 'crond' is running (if there is less than 1 process, critical). I have two ways:
::

  $ perl centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=processcount --hostname=127.0.0.1 --snmp-version=2c --snmp-community=public --process-name=crond --critical=1:
  CRITICAL: Number of current processes running: 0 | 'nbproc'=0;;1:;0;
  
  $ perl centreon_plugins.pl --plugin=os::linux::snmp::plugin --mode=processcount --hostname=127.0.0.1 --snmp-version=2c --snmp-community=public --process-name=crond --critical=@0:0
  CRITICAL: Number of current processes running: 0 | 'nbproc'=0;;@0:0;0;

------------------------------------------
How can i check a generic SNMP OID value ?
------------------------------------------

There is a generic SNMP plugin to check it. An example to get 'SysUptime' SNMP OID:
::

  $ perl centreon_plugins.pl --plugin=snmp_standard::plugin --mode=numeric-value --oid='.1.3.6.1.2.1.1.3.0' --hostname=127.0.0.1 --snmp-version=2c --snmp-community=public

===============
Troubleshooting
===============

----
SNMP
----

I get the SNMP error: 'UNKNOWN:.* (tooBig).*'
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The following error can happened with some equipments.
You can resolve it if you set following options:

* ``--subsetleef=20`` ``--maxrepetitions=20``

I get the SNMP error: 'UNKNOWN:.*Timeout'
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The following error means:

* Don't have network access to the target SNMP Server (a firewall can block UDP 161)
* Wrong SNMP community name or SNMP version set

I get the SNMP error: 'UNKNOWN:.*Cant get a single value'
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

The following error means: SNMP access is working but you can't retrieve SNMP values.
Very possible reasons:

* SNMP value is not set yet (can be happened when a snmp server is just started)
* SNMP value is not implemented by the constructor 
* SNMP value is set on a specific Firmware or OS

Seems that process check is not working well for some arguments filter
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

In SNMP, there is a limit in argument length of 128 characters. 
So, if you try to filter with an argument after 128 characters, it won't work. It can happen with java arguments.
To solve the problem, you should prefer a NRPE check.

Can't access in SNMP v3
^^^^^^^^^^^^^^^^^^^^^^^

First, you need to validate SNMP v3 connection with snmpwalk. When it's working, you set SNMP v3 options in command line.
The mapping between 'snmpwalk' options and centreon plugin options:

* -a => ``--authprotocol``
* -A => ``--authpassphrase``
* -u => ``--snmp-username``
* -x => ``--privprotocol``
* -X => ``--privpassphrase``
* -l => not needed (automatic)
* -e => ``--securityengineid``
* -E => ``--contextengineid``

-------------
Miscellaneous
-------------

I get the error: "UNKNOWN: Need to specify '--custommode'."
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Some plugins need to set the option ``--custommode``. You can know the value to set with the option ``--list-custommode``. An example::

  $ perl centreon_plugins.pl --plugin=storage::ibm::DS3000::cli::plugin --list-custommode
  ...
  Custom Modes Available:
   smcli
  
  $ perl centreon_plugins.pl --plugin=storage::ibm::DS3000::cli::plugin --custommode=smcli --list-mode

